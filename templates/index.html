<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Applicant Submission Form</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
 <!-- jQuerry -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

 
</head>
<body>
  <div class="form-container">
    <h1>Applicant Submission Form</h1>
    <h3>Follow the Instructions, Please!!</h3>
    <h5 >Note: <br/>Please make sure you select the exact role/job advertised and follow all the job description instructions.</h5>
    <p>If you encounter any problems with the application, contact us at <a href="mailto:info@paycaretech.world">info@paycaretech.world</a>.</p>
    <p>You need to provide access code to be able to submit your application</p>
    <p>Good luck!</p>
       <!-- Flash messages -->
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <ul>
          {% for category, message in messages %}
            <li class="{{ category }}">{{ message }}</li>
          {% endfor %}
        </ul>
      {% endif %}
    {% endwith %}
     <!-- Hide form if application is successful or already applied -->
     {% if not success and not already_applied %}
    <form id="applicantForm" action="{{ url_for('submit') }}" method="POST" enctype="multipart/form-data">
      <label for="role">Select the role/job you are applying for:</label>
      <select id="role" name="role" required>
        <option value="" disabled selected>Select role/job</option>
        {% for role in active_roles %}
          <option value="{{ role }}">{{ role }}</option>
        {% endfor %}
      </select>
      <div style="margin-bottom: 10px;">
        <label for="country" style="font-weight: bold;">Country:</label>
      </div>
      <select id="country" name="country" required >
        <option value="" disabled selected>Select your country</option>
        <option value="Nigeria">Nigeria</option>
        <option value="Ghana">Ghana</option>
        <option value="Kenya">Kenya</option>
        <option value="India">India</option>
        <option value="Pakistan">Pakistan</option>
        <option value="USA">USA</option>
        <option value="UK">UK</option>
        <option value="India">India</option>
        <option value="Australia">Australia</option>
        <!-- Add more countries as needed -->
      </select>

      <div id="nigeriaInputs">
        <div style="margin: 20px 0;">
          <!-- State -->
          <div style="margin-bottom: 10px;">
            <label for="state" style="font-weight: bold;">State:</label>
          </div>
          <div style="margin-bottom: 10px; font-size: 0.9em; color: #555;">
            If you are applying for Sales representative, please select your actual state of residence because that is the state you will be covering:
          </div>
         
        </div>
        
        <select id="state" name="state"  class="hidden">
          <option value="" disabled selected>Select your state of residence</option>
          <!-- Nigerian states -->
          <option value="Abia">Abia</option>
          <option value="Abuja">Abuja</option>
          <option value="Adamawa">Adamawa</option>
          <option value="Akwa Ibom">Akwa Ibom</option>
          <option value="Anambra">Anambra</option>
          <option value="Bauchi">Bauchi</option>
          <option value="Bayelsa">Bayelsa</option>
          <option value="Benue">Benue</option>
          <option value="Borno">Borno</option>
          <option value="Cross River">Cross River</option>
          <option value="Delta">Delta</option>
          <option value="Ebonyi">Ebonyi</option>
          <option value="Edo">Edo</option>
          <option value="Ekiti">Ekiti</option>
          <option value="Enugu">Enugu</option>
          <option value="Gombe">Gombe</option>
          <option value="Imo">Imo</option>
          <option value="Jigawa">Jigawa</option>
          <option value="Kaduna">Kaduna</option>
          <option value="Kano">Kano</option>
          <option value="Katsina">Katsina</option>
          <option value="Kebbi">Kebbi</option>
          <option value="Kogi">Kogi</option>
          <option value="Kwara">Kwara</option>
          <option value="Lagos">Lagos</option>
          <option value="Nasarawa">Nasarawa</option>
          <option value="Niger">Niger</option>
          <option value="Ogun">Ogun</option>
          <option value="Ondo">Ondo</option>
          <option value="Osun">Osun</option>
          <option value="Oyo">Oyo</option>
          <option value="Plateau">Plateau</option>
          <option value="Rivers">Rivers</option>
          <option value="Sokoto">Sokoto</option>
          <option value="Taraba">Taraba</option>
          <option value="Yobe">Yobe</option>
          <option value="Zamfara">Zamfara</option>
          <!-- Add other states -->
        </select>
        <div style="margin: 20px 0;">
          <!-- Local Government Area -->
          <div style="margin-bottom: 10px;">
            <label for="lga" style="font-weight: bold;">Local Government Area (LGA):</label>
          </div>
          <div style="margin-bottom: 10px; font-size: 0.9em; color: #555;">
            If you are applying for Aggregator or Agent role, please provide your actual Local Government Area of residence because that is the region you will be covering:
          </div>
          <input 
            type="text" 
            id="lga" 
            name="lga" 
            class="hidden"
            placeholder="Enter LGA of residence" 
            style="width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 4px; margin-bottom: 20px;"
          >
        
          <!-- Council Ward -->
          <div style="margin-bottom: 10px;">
            <label for="ward" style="font-weight: bold;">Your Council Ward:</label>
          </div>
          <div style="margin-bottom: 10px; font-size: 0.9em; color: #555;">
            If you are applying for Agent role, please provide your actual council ward of residence because that is where you will be covering:
          </div>
          <input 
            type="text" 
            id="ward" 
            name="ward" 
            class="hidden"
            placeholder="Enter Council Ward of residence" 
            style="width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 4px;"
          >
        </div>
      </div>

      <div id="otherCountryInputs" style="display: none;">
        <label for="state">State/Province:</label>
        <input type="text" id="state_province" name="state_province" class="hidden" placeholder="Enter State/Province">
        <br><br>
      </div>
      <label for="city">City:</label>
      <input type="text" id="city" name="city" placeholder="Enter your city" required>
      <label for="name">Full Name:</label>
      <input type="text" id="name" name="name" placeholder="Enter full name" required>
   
      <div class="phone-container">
        <label for="phone">Phone Number:</label>
        <select id="countryCode" name="countryCode" required>
          <option value="+234">+234 (Nigeria)</option>
          <option value="+233">+233 (Ghana)</option>
          <option value="+254">+254 (Kenya)</option>
          <option value="+92">+92 (Pakistan)</option>          
          <option value="+1">+1 (USA)</option>
          <option value="+44">+44 (UK)</option>
          <option value="+91">+91 (India)</option>
          <option value="+61">+61 (Australia)</option>
          <option value="+49">+49 (Germany)</option>
          <option value="+33">+33 (France)</option>
          <option value="+81">+81 (Japan)</option>
          <option value="+39">+39 (Italy)</option>
          <option value="+55">+55 (Brazil)</option>
          <option value="+52">+52 (Mexico)</option>
          <option value="+34">+34 (Spain)</option>
          <option value="+97">+97 (Middle East)</option>
          <option value="+63">+63 (Philippines)</option>
          <option value="+27">+27 (South Africa)</option>
          <option value="+20">+20 (Egypt)</option>
          <option value="+7">+7 (Russia)</option>
          <option value="+32">+32 (Belgium)</option>
          <option value="+31">+31 (Netherlands)</option>
          <option value="+81">+81 (Japan)</option>
          <option value="+47">+47 (Norway)</option>
          <!-- Add more countries as needed -->
        </select>
        <input type="tel" id="phone" name="phone" placeholder="Enter the rest 10-digit of your phone number. eg. 8160052390" pattern="[0-9]{10}" required title="Please enter exactly 11 digits" maxlength="10">
      </div>

      <label for="email">Email Address:</label>
      <input type="email" id="email" name="email" placeholder="Enter email address eg. johnmark@gmail.com" required pattern="[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$" title="Please enter a valid email address">

      <label for="address">Address:</label>
      <textarea id="address" name="address" placeholder="Enter address" required></textarea>

      <label for="occupation">Current Occupation:</label>
      <input type="text" id="occupation" name="occupation" placeholder="Enter occupation" required>

      <label for="cv">Upload CV (Accepted formats: .pdf, .doc, .docx, Max size: 2MB):</label>
      <input type="file" id="cv" name="cv" accept=".pdf,.doc,.docx" required>

      <label for="coverLetter">Upload Cover Letter (Accepted formats: .pdf, .doc, .docx, Max size: 2MB):</label>
      <input type="file" id="coverLetter" name="coverLetter" accept=".pdf,.doc,.docx" required>


      <!-- Access Code Input -->
      <label for="accesscode">Enter Access Code:</label>
      <input type="text" id="accesscode" name="accesscode" placeholder="Enter access code" required>
      <label style="color: rgb(29, 11, 164);font-weight: bold;">If you are shortlisted, you will recive and email from us by Febuary 20th 2025 about your application update. You can also contact after this date, if you don't hear from us :</label>
      <button type="submit">Submit</button>
    </form>
    {% endif %}

    <!-- Message if the user already applied -->
    {% if already_applied %}
    <div class="error-message">
      <p>You have already applied with this phone number or email.</p>
    </div>
    {% endif %}
  </div>

  
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const countrySelect = document.getElementById('country');
      const nigeriaInputs = document.getElementById('nigeriaInputs');
      const otherCountryInputs = document.getElementById('otherCountryInputs');
      
      // Toggle visibility based on selected country
      function toggleInputs() {
        if (countrySelect.value === 'Nigeria') {
          nigeriaInputs.style.display = 'block';
          otherCountryInputs.style.display = 'none';
        } else {
          nigeriaInputs.style.display = 'none';
          otherCountryInputs.style.display = 'block';
        }
      }
  
      // Event listener to handle country selection changes
      countrySelect.addEventListener('change', toggleInputs);
  
      // Initial check to set visibility when the page loads (if a value is already selected)
      toggleInputs();
    });

    $(document).ready(function () {
  const stateField = $('#state');
  const stateProvinceField = $('#state_province');
  const lgaField = $('#lga');
  const wardField = $('#ward');
  const stateProvinceLabel = $('#stateProvinceLabel');
  const lgaLabel = $('#lgaLabel');
  const wardLabel = $('#wardLabel');

  // Function to update field visibility and requirement
  function updateFieldVisibility() {
    if (!stateField.prop('disabled') && stateField.is(':visible')) {
      // If state field is visible, enabled, and required
      // Make LGA and Ward required
      lgaField.attr('required', true).prop('disabled', false);
      wardField.attr('required', true).prop('disabled', false);

      lgaLabel.removeClass('hidden');
      wardLabel.removeClass('hidden');
      stateProvinceLabel.addClass('hidden');

      // Hide stateProvince field
      stateProvinceField.addClass('hidden').attr('required', false).prop('disabled', true);
    } else {
      // If state field is not visible or disabled
      // Make LGA and Ward optional
      lgaField.attr('required', false).prop('disabled', false);
      wardField.attr('required', false).prop('disabled', false);

      lgaLabel.removeClass('hidden');
      wardLabel.removeClass('hidden');
      stateProvinceLabel.removeClass('hidden');

      // Show stateProvince field
      stateProvinceField.removeClass('hidden').attr('required', true).prop('disabled', false);
    }
  }

  // Initialize field visibility based on the initial state value
  updateFieldVisibility();

  // Update visibility when the state field changes
  stateField.change(function () {
    updateFieldVisibility();
  });
});


  </script>
  
</body>
</html>
